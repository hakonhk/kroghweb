<html>
    <head>
        <title>Nedtelling!</title>

        <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />

        <style>
            body {
                margin: 0;
            }

            html,
            body,
            #time {
                position: relative;
                height: 100%;
                width: 100%;
            }

            #time {
                display: flex;
                align-items: center;
                justify-content: center;
                font-size: 20vw;
            }

            audio {
                visibility: hidden;
                position: absolute;
                top: -100px;
                left: 0;
            }

            select {
                position: absolute;
                top: 10px;
                right: 10px;
            }
        </style>
    </head>
    <body>
        <div id="time"></div>

        <select>
            <option value="5">5 sekunder</option>
            <option value="10">10 sekunder</option>
            <option value="15">15 sekunder</option>
            <option value="20">20 sekunder</option>
            <option value="25">25 sekunder</option>
            <option value="30">30 sekunder</option>
        </select>

        <script>
            const $time = document.querySelector('#time');
            const $limit = document.querySelector('select');
            const running = false;
            const beep = new Audio('beep.mp3');
            
            let tickStart;

            function tick () {
                var now = Date.now();
                let diff = '?';

                if (tickStart) {
                    diff = Math.floor((now - tickStart) / 100) / 10;
                } else {
                    tickStart = now;
                }

                if (diff > parseInt($limit.value)) {
                    reset();
                    playSound();
                    diff = 0;
                }

                $time.innerHTML = diff + 's';

                setTimeout(tick, 50);
            }

            function reset () {
                tickStart = null;
            }

            function playSound () {
                // var sound = document.getElementById("audio");
                // sound.play();
                beep.play();
            }

            // Start game
            tick();

            $time.addEventListener('click', reset);
            $time.addEventListener('touchstart', reset);

        </script>
    </body>
</html>